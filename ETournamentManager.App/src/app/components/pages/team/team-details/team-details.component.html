<div id="team-container">
  @if (teamData !== null) {
    <div id="banner-header">
      <app-e-image-upload
        [entityId]="teamId"
        [imgUrl]="teamImageUrl"
        [hideActions]="
          teamData.captain.id !== currentUserProfile?.id && currentUserProfile?.roleName !== 'ADMIN'
        "
      />
      <div class="banner-info-wrapper">
        <h1 class="title">{{ teamData.name }}</h1>
        <h4 class="description">{{ teamData.description }}</h4>
        <p class="contact">
          Team captain contact:
          <a class="contact-mail" [href]="'mailto:' + teamData.captain.email">
            {{ teamData.captain.email }}
          </a>
        </p>
      </div>
    </div>

    @if (
      currentUserProfile !== null &&
      (teamData.captain.id === currentUserProfile.id || currentUserProfile.roleName === 'ADMIN')
    ) {
      <app-e-input
        label="Add user to team"
        [isSearch]="true"
        [searchResult]="searchUsernames"
        (inputChanged)="getUsersByUsername($event)"
        (searchResultSelected)="selectUser($event)"
      />
    }

    <div class="section-container">
      <div class="title-wrapper">
        <div class="title">Participent Teams</div>
        <hr />
      </div>

      <div class="info-cards-container cards-container">
        @for (currentMember of teamMembersData; track $index) {
          <app-e-info-card [cardData]="getUserInfoCard(currentMember)">
            @if (
              (teamData.captain.id === currentUserProfile?.id ||
                currentUserProfile?.roleName === 'ADMIN') &&
              currentMember.id.toLowerCase() !== teamData.captain.id
            ) {
              <div
                actions
                class="actions"
                (click)="$event.stopPropagation(); onRemoveMemberClick(currentMember.id)"
              >
                <img src="assets/images/close-icon.svg" alt="Close icon" />
              </div>
            }

            @if (currentMember.id === this.teamData.captain.id.toLowerCase()) {
              <div statsIcons class="stats-info">
                <img src="assets/images/crown-icon.svg" alt="Captain icon" />
                <div class="subtitle">Captain</div>
              </div>
            }
          </app-e-info-card>
        }
      </div>
    </div>

    @if (activeTournaments.length > 0) {
      <div class="section-container">
        <div class="title-wrapper">
          <div class="title">Active Tournaments</div>
          <hr />
        </div>

        <div class="info-cards-container cards-container">
          @for (currentTournament of activeTournaments; track $index) {
            <app-e-info-card
              [cardData]="getTournamentInfoCard(currentTournament)"
              (cardClicked)="onTournamentCardSelect($event)"
            >
              <!-- @if (currentMember.id === this.teamData.captain.id.toLowerCase()) {
                <div statsIcons class="stats-info">
                  <img src="assets/images/crown-icon.svg" alt="Captain icon" />
                  <div class="subtitle">Captain</div>
                </div>
              } -->
            </app-e-info-card>
          }
        </div>
      </div>
    }

    @if (pastTournaments.length > 0) {
      <div class="section-container">
        <div class="title-wrapper">
          <div class="title">Past Tournaments</div>
          <hr />
        </div>

        <div class="info-cards-container cards-container">
          @for (currentTournament of pastTournaments; track $index) {
            <app-e-info-card
              [cardData]="getTournamentInfoCard(currentTournament)"
              (cardClicked)="onTournamentCardSelect($event)"
            >
              <!-- @if (currentMember.id === this.teamData.captain.id.toLowerCase()) {
                <div statsIcons class="stats-info">
                  <img src="assets/images/crown-icon.svg" alt="Captain icon" />
                  <div class="subtitle">Captain</div>
                </div>
              } -->
            </app-e-info-card>
          }
        </div>
      </div>
    }
  }
</div>
